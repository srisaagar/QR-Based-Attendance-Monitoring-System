{"ast":null,"code":"export var Html5QrcodeScannerState;\n(function (Html5QrcodeScannerState) {\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"NOT_STARTED\"] = 1] = \"NOT_STARTED\";\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"SCANNING\"] = 2] = \"SCANNING\";\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"PAUSED\"] = 3] = \"PAUSED\";\n})(Html5QrcodeScannerState || (Html5QrcodeScannerState = {}));\nvar StateManagerImpl = function () {\n  function StateManagerImpl() {\n    this.state = Html5QrcodeScannerState.NOT_STARTED;\n    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;\n  }\n  StateManagerImpl.prototype.directTransition = function (newState) {\n    this.failIfTransitionOngoing();\n    this.validateTransition(newState);\n    this.state = newState;\n  };\n  StateManagerImpl.prototype.startTransition = function (newState) {\n    this.failIfTransitionOngoing();\n    this.validateTransition(newState);\n    this.onGoingTransactionNewState = newState;\n    return this;\n  };\n  StateManagerImpl.prototype.execute = function () {\n    if (this.onGoingTransactionNewState === Html5QrcodeScannerState.UNKNOWN) {\n      throw \"Transaction is already cancelled, cannot execute().\";\n    }\n    var tempNewState = this.onGoingTransactionNewState;\n    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;\n    this.directTransition(tempNewState);\n  };\n  StateManagerImpl.prototype.cancel = function () {\n    if (this.onGoingTransactionNewState === Html5QrcodeScannerState.UNKNOWN) {\n      throw \"Transaction is already cancelled, cannot cancel().\";\n    }\n    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;\n  };\n  StateManagerImpl.prototype.getState = function () {\n    return this.state;\n  };\n  StateManagerImpl.prototype.failIfTransitionOngoing = function () {\n    if (this.onGoingTransactionNewState !== Html5QrcodeScannerState.UNKNOWN) {\n      throw \"Cannot transition to a new state, already under transition\";\n    }\n  };\n  StateManagerImpl.prototype.validateTransition = function (newState) {\n    switch (this.state) {\n      case Html5QrcodeScannerState.UNKNOWN:\n        throw \"Transition from unknown is not allowed\";\n      case Html5QrcodeScannerState.NOT_STARTED:\n        this.failIfNewStateIs(newState, [Html5QrcodeScannerState.PAUSED]);\n        break;\n      case Html5QrcodeScannerState.SCANNING:\n        break;\n      case Html5QrcodeScannerState.PAUSED:\n        break;\n    }\n  };\n  StateManagerImpl.prototype.failIfNewStateIs = function (newState, disallowedStatesToTransition) {\n    for (var _i = 0, disallowedStatesToTransition_1 = disallowedStatesToTransition; _i < disallowedStatesToTransition_1.length; _i++) {\n      var disallowedState = disallowedStatesToTransition_1[_i];\n      if (newState === disallowedState) {\n        throw \"Cannot transition from \".concat(this.state, \" to \").concat(newState);\n      }\n    }\n  };\n  return StateManagerImpl;\n}();\nvar StateManagerProxy = function () {\n  function StateManagerProxy(stateManager) {\n    this.stateManager = stateManager;\n  }\n  StateManagerProxy.prototype.startTransition = function (newState) {\n    return this.stateManager.startTransition(newState);\n  };\n  StateManagerProxy.prototype.directTransition = function (newState) {\n    this.stateManager.directTransition(newState);\n  };\n  StateManagerProxy.prototype.getState = function () {\n    return this.stateManager.getState();\n  };\n  StateManagerProxy.prototype.canScanFile = function () {\n    return this.stateManager.getState() === Html5QrcodeScannerState.NOT_STARTED;\n  };\n  StateManagerProxy.prototype.isScanning = function () {\n    return this.stateManager.getState() !== Html5QrcodeScannerState.NOT_STARTED;\n  };\n  StateManagerProxy.prototype.isStrictlyScanning = function () {\n    return this.stateManager.getState() === Html5QrcodeScannerState.SCANNING;\n  };\n  StateManagerProxy.prototype.isPaused = function () {\n    return this.stateManager.getState() === Html5QrcodeScannerState.PAUSED;\n  };\n  return StateManagerProxy;\n}();\nexport { StateManagerProxy };\nvar StateManagerFactory = function () {\n  function StateManagerFactory() {}\n  StateManagerFactory.create = function () {\n    return new StateManagerProxy(new StateManagerImpl());\n  };\n  return StateManagerFactory;\n}();\nexport { StateManagerFactory };\n//# sourceMappingURL=state-manager.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}